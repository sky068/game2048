{"version":3,"sources":["ButtonSafe.js"],"names":["cc","Class","extends","Component","properties","safeTime","default","tooltip","start","button","getComponent","Button","clickEvents","node","on","scheduleOnce","dt"],"mappings":";;;;AAAA;;;;AAIA;;AAEAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,kBAAU;AACNC,qBAAS,GADH;AAENC,qBAAS;AAFH;AADF,KAHP;;AAULC,SAVK,mBAUE;AAAA;;AACH,YAAIC,SAAS,KAAKC,YAAL,CAAkBV,GAAGW,MAArB,CAAb;AACA,YAAI,CAACF,MAAL,EAAY;AACR;AACH;;AAED,aAAKG,WAAL,GAAmBH,OAAOG,WAA1B;;AAEA,aAAKC,IAAL,CAAUC,EAAV,CAAa,OAAb,EAAsB,YAAI;AACtBL,mBAAOG,WAAP,GAAqB,EAArB;AACA,kBAAKG,YAAL,CAAkB,UAACC,EAAD,EAAM;AACpBP,uBAAOG,WAAP,GAAqB,MAAKA,WAA1B;AACH,aAFD,EAEG,MAAKP,QAFR;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACH,SAdD,EAcG,IAdH;AAeH;AAjCI,CAAT","file":"ButtonSafe.js","sourceRoot":"../../../../../../assets/scripts/framework/common","sourcesContent":["/**\n * Created by skyxu on 2018/9/12.\n */\n\n\"use strict\";\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        safeTime: {\n            default: 0.5,\n            tooltip: \"按钮保护时间，指定间隔内只能点击一次.\"\n        }\n    },\n\n    start(){\n        let button = this.getComponent(cc.Button);\n        if (!button){\n            return;\n        }\n\n        this.clickEvents = button.clickEvents;\n\n        this.node.on('click', ()=>{\n            button.clickEvents = [];\n            this.scheduleOnce((dt)=>{\n                button.clickEvents = this.clickEvents;\n            }, this.safeTime);\n\n            // mark: 这种方式会导致快速点击按钮时触摸穿透（按钮禁用时不再接受触摸事件）\n            // let autoGrey = button.enableAutoGrayEffect;\n            // button.enableAutoGrayEffect = false;\n            // button.interactable = false;\n            // this.scheduleOnce((dt)=>{\n            //     button.enableAutoGrayEffect = autoGrey;\n            //     button.interactable = true;\n            // }, this.safeTime);\n        }, this);\n    }\n});\n"]}