{"version":3,"sources":["../../../../../../assets/scripts/framework/common/assets/scripts/framework/common/CSVParser.js"],"names":["CSV","DefaultOptions","delim","quote","rowdelim","CSVSyntaxError","msg","message","Error","captureStackTrace","arguments","callee","prototype","constructor","name","toString","CSVParser","str","options","length","RangeError","pos","endpos","lineNo","next","s","len","substring","ahead","countMatches","patt","count","i","indexOf","quotedField","mark","tmp","start","end","part","push","charAt","join","normalField","begin","idelim","irowdelim","Math","min","nextField","nextRow_0","nextRow","ar","max","nextRowSimple","hasNext","parseOne","parser","parseOneSimple","Array","map","callback","thisArg","T","A","k","TypeError","O","Object","call","kValue","mappedValue","module","exports"],"mappings":"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","file":"CSVParser.js","sourceRoot":"../../../../../../assets/scripts/framework/common","sourcesContent":["/**\n * csv.js\n *\n * https://github.com/henix/csv.js\n *\n * License: MIT License\n */\n\nvar CSV = {\n    DefaultOptions: {\n        delim: ',',\n        quote: '\"',\n        rowdelim: '\\n'\n        // rowdelim: '\\r\\n'\n    }\n};\n\nfunction CSVSyntaxError(msg) {\n    this.message = msg;\n    if (Error.captureStackTrace) {\n        Error.captureStackTrace(this, arguments.callee);\n    }\n}\nCSVSyntaxError.prototype = new Error();\nCSVSyntaxError.prototype.constructor = CSVSyntaxError;\nCSVSyntaxError.prototype.name = 'CSVSyntaxError';\nif (new Error().toString() == '[object Error]') { // IE 6 7\n    CSVSyntaxError.prototype.toString = function () {\n        return this.name + ': ' + this.message;\n    };\n}\n\nfunction CSVParser(str, options) {\n    this.str = str;\n    this.options = CSV.DefaultOptions;\n    if (options) {\n        options.delim = options.delim || CSV.DefaultOptions.delim;\n        options.quote = options.quote || CSV.DefaultOptions.quote;\n        if (options.quote.length != 1) {\n            throw new RangeError('options.quote should be only 1 char');\n        }\n        options.rowdelim = options.rowdelim || CSV.DefaultOptions.rowdelim;\n        this.options = options;\n    }\n\n    this.pos = 0;\n    this.endpos = str.length;\n\n    this.lineNo = 1;\n}\n\nCSVParser.prototype.next = function (s) {\n    if (this.pos < this.endpos) {\n        var len = s.length;\n        if (this.str.substring(this.pos, this.pos + len) == s) {\n            this.pos += len;\n            return true;\n        }\n    }\n    return false;\n};\n\nCSVParser.prototype.ahead = function (s) {\n    if (this.pos < this.endpos) {\n        if (!s) {\n            return true;\n        }\n        var len = s.length;\n        if (this.str.substring(this.pos, this.pos + len) == s) {\n            return true;\n        }\n    }\n    return false;\n};\n\nfunction countMatches(str, patt) {\n    var count = 0;\n    var i = str.indexOf(patt);\n    while (i > 0) {\n        count++;\n        i = str.indexOf(patt, i + patt.length);\n    }\n    return count;\n}\n\n/**\n * quotedField: '\"' * ((1 - '\"') + P'\"\"')^0 * '\"'\n */\nCSVParser.prototype.quotedField = function () {\n    var mark = this.pos;\n    if (!this.next(this.options.quote)) {\n        this.pos = mark;\n        return null;\n    }\n    var tmp = [];\n    var start = this.pos;\n    while (start < this.endpos) {\n        var end = this.str.indexOf(this.options.quote, start);\n        if (end < 0) {\n            throw new CSVSyntaxError('line ' + this.lineNo + ': missing close quote');\n        }\n        var part = this.str.substring(start, end);\n        this.lineNo += countMatches(part, '\\n');\n        tmp.push(part);\n        if ((end + 1 < this.endpos) && (this.str.charAt(end + 1) == this.options.quote)) {\n            start = end + 2;\n            end = this.str.indexOf(this.options.quote, start);\n        } else {\n            this.pos = end + 1;\n            break;\n        }\n    }\n    return tmp.join(this.options.quote);\n};\n\n/**\n * normalField: (1 - S(\",\\n\"))^0\n */\nCSVParser.prototype.normalField = function () {\n    var begin = this.pos;\n    var idelim = this.str.indexOf(this.options.delim, begin);\n    if (idelim < 0) {\n        idelim = this.endpos;\n    }\n    var irowdelim = this.str.indexOf(this.options.rowdelim, begin);\n    if (irowdelim < 0) {\n        irowdelim = this.endpos;\n    }\n    this.pos = Math.min(idelim, irowdelim);\n    return this.str.substring(begin, this.pos);\n};\n\n/**\n * nextField: quotedField + normalField\n */\nCSVParser.prototype.nextField = function () {\n    var tmp = this.quotedField();\n    if (tmp !== null) return tmp;\n    return this.normalField();\n};\n\n/**\n * nextRow_0: ',' * nextField\n */\nCSVParser.prototype.nextRow_0 = function () {\n    var mark = this.pos;\n    if (!this.next(this.options.delim)) {\n        this.pos = mark;\n        return null;\n    }\n    var tmp = this.nextField();\n    if (tmp === null) {\n        this.pos = mark;\n        return null;\n    }\n    return tmp;\n};\n\n/**\n * nextRow: nextField * (',' * nextField)^0 * (P'\\n' + -1)\n *\n * @return String[]\n * @throws CSVSyntaxError\n */\nCSVParser.prototype.nextRow = function () {\n    var ar = [];\n    var mark = this.pos;\n    var tmp = this.nextField();\n    if (tmp === null) {\n        this.pos = mark;\n        return null;\n    }\n    ar.push(tmp);\n    tmp = this.nextRow_0();\n    while (tmp !== null) {\n        ar.push(tmp);\n        tmp = this.nextRow_0();\n    }\n    if (!(this.next(this.options.rowdelim) || !this.ahead())) {\n        throw new CSVSyntaxError('line ' + this.lineNo + ': ' + this.str.substring(Math.max(this.pos - 5, 0), this.pos + 5));\n        this.pos = mark;\n        return null;\n    }\n    if (this.str.charAt(this.pos - 1) == '\\n') {\n        this.lineNo++;\n    }\n    return ar;\n};\n\n/**\n * nextRow: nextField * (',' * nextField)^0 * (P'\\n' + -1)\n * @returns String or String[]\n */\nCSVParser.prototype.nextRowSimple = function () {\n    var ar = [];\n    var mark = this.pos;\n    var tmp = this.nextField();\n    if (tmp === null) {\n        this.pos = mark;\n        return null;\n    }\n    ar.push(tmp);\n    tmp = this.nextRow_0();\n    while (tmp !== null) {\n        ar.push(tmp);\n        tmp = this.nextRow_0();\n    }\n    if (!(this.next(this.options.rowdelim) || !this.ahead())) {\n        throw new CSVSyntaxError('line ' + this.lineNo + ': ' + this.str.substring(Math.max(this.pos - 5, 0), this.pos + 5));\n        this.pos = mark;\n        return null;\n    }\n    if (this.str.charAt(this.pos - 1) == '\\n') {\n        this.lineNo++;\n    }\n\n    return ar.length === 1 ? ar[0] : ar;\n};\n\n/**\n * @return boolean\n */\nCSVParser.prototype.hasNext = function () {\n    return this.ahead();\n};\n\nCSV.CSVSyntaxError = CSVSyntaxError;\nCSV.CSVParser = CSVParser;\n\n/**\n * @return String[] or null\n */\nCSV.parseOne = function (str, options) {\n    var parser = new CSVParser(str, options);\n    if (parser.hasNext()) {\n        return parser.nextRow();\n    }\n    return null;\n};\n\n/**\n *\n * @returns String or String[] or null\n */\nCSV.parseOneSimple = function (str, options) {\n    var parser = new CSVParser(str, options);\n    if (parser.hasNext()) {\n        return parser.nextRowSimple();\n    }\n    return null;\n};\n\n/**\n * https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/map\n */\nif (!Array.prototype.map) {\n    Array.prototype.map = function (callback, thisArg) {\n        var T, A, k;\n        if (this === null) {\n            throw new TypeError(\" this is null or not defined\");\n        }\n        var O = Object(this);\n        var len = O.length >>> 0;\n        if ({}.toString.call(callback) != \"[object Function]\") {\n            throw new TypeError(callback + \" is not a function\");\n        }\n        if (thisArg) {\n            T = thisArg;\n        }\n        A = new Array(len);\n        k = 0;\n        while (k < len) {\n            var kValue, mappedValue;\n            if (k in O) {\n                kValue = O[k];\n                mappedValue = callback.call(T, kValue, k, O);\n                A[k] = mappedValue;\n            }\n            k++;\n        }\n        return A;\n    };\n}\n\nmodule.exports = CSVParser;\n"]}